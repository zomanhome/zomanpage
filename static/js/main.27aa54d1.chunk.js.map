{"version":3,"sources":["reducers/index.js","reducers/photos.js","components/header/header.js","components/header/index.js","components/pages/home/index.js","components/pages/home/home.js","components/pages/test.js","components/pages/radio/radio.js","components/pages/radio/index.js","services/PhotosService.js","services/util.js","constants/settings.js","constants/photos.js","components/pages/photos/photos-menu.js","components/pages/photos/photos.js","actions/photos.js","components/pages/photos/favorites.js","components/app/app.js","components/app/index.js","index.js","components/header/logo.png"],"names":["rootReducer","combineReducers","photos","state","arguments","length","undefined","action","type","concat","Object","toConsumableArray","library","add","faHome","faImages","faBroadcastTower","faBomb","Header","react_default","a","createElement","Navbar","collapseOnSelect","expand","bg","variant","sticky","Brand","alt","src","logo","width","height","className","Toggle","aria-controls","Collapse","id","Nav","lib","exact","to","Link","react_fontawesome_index_es","icon","NavDropdown","title","Item","Divider","Home","withRouter","Alert","dnb","_style","ListRadio","_ref","stations","map","station","key","style","scrolling","frameBorder","Radio","radio_ListRadio","Component","PhotoService","url","params","baseUrl","keys","reduce","ac","index","param","getParamsString","client_id","page","per_page","order_by","fetch","then","data","json","photo","favorites","localStorage","getObj","forEach","el","urls","small","sponsored","liked_by_user","faAngleDown","faPlus","PhotosMenu","Fragment","Button","onClick","maxScroll","document","documentElement","scrollHeight","clientHeight","window","scrollTo","Photos","handleScroll","pageYOffset","_this","props","getPhotos","Math","round","random","e","img","target","classList","toggle","obj","contains","push","setObj","filter","addEventListener","this","removeEventListener","photos_menu","react_photo_gallery_esm","connect","dispatch","PhotosService","catch","error","alert","getPhotosAction","Favorites","setState","store","createStore","devToolsEnhancer","Storage","prototype","setItem","JSON","stringify","parse","getItem","App","es","BrowserRouter","components_header","Switch","Route","path","component","Test","render","myContainer","querySelector","ReactDOM","components_app","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.27aa54d1.chunk.js","sourcesContent":["import { combineReducers } from \"redux\";\r\n\r\nimport { photos } from \"./photos\";\r\n\r\nexport const rootReducer = combineReducers({ photos });\r\n","export const photos = (state = [], action) => {\r\n  switch (action.type) {\r\n    case \"GET_PHOTOS\":\r\n      return [...state, ...action.photos];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Nav, Navbar, NavDropdown } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\n\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport {\r\n  faHome,\r\n  faImages,\r\n  faBroadcastTower,\r\n  faBomb\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport \"./header.scss\";\r\nimport logo from \"./logo.png\";\r\n\r\nlibrary.add(faHome, faImages, faBroadcastTower, faBomb);\r\n\r\nconst Header = () => {\r\n  return (\r\n    <Navbar collapseOnSelect expand=\"sm\" bg=\"dark\" variant=\"dark\" sticky=\"top\">\r\n      <Navbar.Brand>\r\n        <img\r\n          alt=\"\"\r\n          src={logo}\r\n          width=\"24\"\r\n          height=\"24\"\r\n          className=\"d-inline-block align-top\"\r\n        />\r\n        {` ZOMAN`}\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n      <Navbar.Collapse\r\n        id=\"responsive-navbar-nav\"\r\n        className=\"justify-content-end\"\r\n      >\r\n        <Nav>\r\n          <LinkContainer exact to=\"/\">\r\n            <Nav.Link>\r\n              <FontAwesomeIcon icon=\"home\" />\r\n              {` Home`}\r\n            </Nav.Link>\r\n          </LinkContainer>\r\n          <LinkContainer to=\"/test\">\r\n            <Nav.Link>Test</Nav.Link>\r\n          </LinkContainer>\r\n          <NavDropdown title=\"Services\" id=\"services-dropdown\">\r\n            <LinkContainer to=\"/radio\">\r\n              <NavDropdown.Item>\r\n                <FontAwesomeIcon icon=\"broadcast-tower\" />\r\n                {` Radio`}\r\n              </NavDropdown.Item>\r\n            </LinkContainer>\r\n            <NavDropdown.Divider />\r\n            <LinkContainer to=\"/photos\">\r\n              <NavDropdown.Item>\r\n                <FontAwesomeIcon icon=\"images\" />\r\n                {` Photos`}\r\n              </NavDropdown.Item>\r\n            </LinkContainer>\r\n          </NavDropdown>\r\n          <LinkContainer to=\"/100500\">\r\n            <Nav.Link>\r\n              <FontAwesomeIcon icon=\"bomb\" />\r\n              {` 404`}\r\n            </Nav.Link>\r\n          </LinkContainer>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import Header from \"./header\";\r\n\r\nexport default Header;\r\n","import Home from \"./home\";\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Alert } from \"react-bootstrap\";\r\n\r\nimport \"./home.scss\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div className=\"home\">\r\n      <Alert variant=\"primary\">Home page</Alert>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Home);\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Alert } from \"react-bootstrap\";\r\n\r\nconst Test = () => {\r\n  return <Alert variant=\"success\">Test page</Alert>;\r\n};\r\n\r\nexport default withRouter(Test);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Alert } from \"react-bootstrap\";\r\n\r\nimport \"./radio.scss\";\r\n\r\nconst dnb = [\"s149592\"]; // , \"s16743\", \"s233151\", \"s54061\"\r\nconst _srcBase = \"https://tunein.com/embed/player/\";\r\nconst _style = { width: \"100%\", height: \"100px\" };\r\n\r\nconst ListRadio = ({ stations }) => {\r\n  return stations.map(station => (\r\n    <iframe\r\n      key={station}\r\n      title={station}\r\n      src={`${_srcBase}+${station}`}\r\n      style={_style}\r\n      scrolling=\"no\"\r\n      frameBorder=\"0\"\r\n    />\r\n  ));\r\n};\r\n\r\nclass Radio extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"radio\">\r\n        <Alert variant=\"danger\">Radio page</Alert>\r\n        <div>\r\n          <ListRadio stations={dnb} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Radio);\r\n","import Radio from \"./radio\";\r\n\r\nexport default Radio;\r\n","import { API_GET_PHOTOS_URL, API_PHOTOS_KEY } from \"../constants/settings\";\r\nimport {\r\n  DEFAULT_PHOTOS_PAGE,\r\n  DEFAULT_PHOTOS_PER_PAGE,\r\n  DEFAULT_PHOTOS_ORDER_BY\r\n} from \"../constants/photos\";\r\nimport { getParamsString } from \"../services/util\";\r\n\r\nclass PhotoService {\r\n  static getPhotos(\r\n    page = DEFAULT_PHOTOS_PAGE,\r\n    per_page = DEFAULT_PHOTOS_PER_PAGE,\r\n    order_by = DEFAULT_PHOTOS_ORDER_BY\r\n  ) {\r\n    const url = getParamsString(\r\n      {\r\n        client_id: API_PHOTOS_KEY,\r\n        page,\r\n        per_page,\r\n        order_by\r\n      },\r\n      API_GET_PHOTOS_URL\r\n    );\r\n\r\n    return fetch(url)\r\n      .then(data => {\r\n        return data.json();\r\n      })\r\n      .then(photos => {\r\n        photos.map(photo => {\r\n          // Ищем избранные фотографии в localStorage\r\n          const favorites = localStorage.getObj(\"photos\");\r\n          if (favorites) {\r\n            favorites.forEach(el => {\r\n              if (el.id === photo.id) {\r\n                photo.className = \"selected\";\r\n              }\r\n            });\r\n          }\r\n\r\n          // Фиксим для Gallery\r\n          photo.src = photo.urls.small;\r\n          photo.sponsored = null;\r\n          photo.liked_by_user = null;\r\n          return photo;\r\n        });\r\n\r\n        return photos;\r\n      });\r\n  }\r\n}\r\n\r\nexport default PhotoService;\r\n","export const getParamsString = (params, baseUrl) => {\r\n\r\n    const keys = Object.keys(params);\r\n    if (!keys.length) return baseUrl;\r\n\r\n    return keys.reduce((ac, key, index) => {\r\n        let param = `${key}=${params[key]}`;\r\n        if (index === keys.length-1) {return ac += param};\r\n        return ac += `${param}&&`;\r\n    }, `${baseUrl}/?`)\r\n}","export const API_GET_PHOTOS_URL = \"https://api.unsplash.com/photos\";\r\nexport const API_PHOTOS_KEY =\r\n  \"8698a8b90949579822a705eece0e76effed236c9c51b53bb35bf5801dad3d9de\";\r\n","export const DEFAULT_PHOTOS_PAGE = 1;\r\nexport const DEFAULT_PHOTOS_PER_PAGE = 10;\r\nexport const DEFAULT_PHOTOS_ORDER_BY = \"popular\";\r\n","import React from \"react\";\r\nimport { Nav, Button } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { faAngleDown, faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nlibrary.add(faAngleDown, faPlus);\r\n\r\nconst PhotosMenu = () => {\r\n  const onClick = () => {\r\n    const maxScroll =\r\n      document.documentElement.scrollHeight -\r\n      document.documentElement.clientHeight;\r\n    window.scrollTo(0, maxScroll);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Nav variant=\"pills\">\r\n        <LinkContainer exact to=\"/photos\">\r\n          <Nav.Link>Photos</Nav.Link>\r\n        </LinkContainer>\r\n        <LinkContainer to=\"/favorites\">\r\n          <Nav.Link>Favorites</Nav.Link>\r\n        </LinkContainer>\r\n        <Button variant=\"outline-secondary\" onClick={onClick}>\r\n          <FontAwesomeIcon icon=\"angle-down\" />\r\n        </Button>\r\n      </Nav>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default PhotosMenu;\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport { getPhotosAction } from \"../../../actions/photos\";\r\nimport PhotosMenu from \"./photos-menu\";\r\n\r\nimport \"./photos.scss\";\r\n\r\nclass Photos extends Component {\r\n  // Для удобства отладки\r\n  per_page = 30;\r\n  order_by = \"latest\";\r\n\r\n  componentDidMount() {\r\n    // Скроллер\r\n    window.addEventListener(\"scroll\", this.handleScroll);\r\n\r\n    // Если фотографии ещё не получены с сервера, то получаем 1-ую страницу\r\n    if (!this.props.photos.length) {\r\n      this.props.getPhotos(1, this.per_page, this.order_by);\r\n    } else {\r\n      // Сбрасываем selected\r\n      this.props.photos.forEach(el => {\r\n        // В react-photo-gallery в рендере у <img/> изначально нет свойства class, смело удаляем\r\n        if (el.className) {\r\n          return (el.className = \"\");\r\n        }\r\n      });\r\n\r\n      // Обновляем selected глядя в localStorage\r\n      this.props.photos.forEach(photo => {\r\n        const favorites = localStorage.getObj(\"photos\");\r\n        favorites.forEach(el => {\r\n          if (el.id === photo.id) {\r\n            photo.className = \"selected\";\r\n          }\r\n        });\r\n        return photo;\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"scroll\", this.handleScroll);\r\n  }\r\n\r\n  handleScroll = () => {\r\n    const scroll = window.pageYOffset,\r\n      maxScroll =\r\n        document.documentElement.scrollHeight -\r\n        document.documentElement.clientHeight;\r\n    // Докрутили\r\n    if (scroll === maxScroll) {\r\n      // Добавляем фото со случайной страницы, чтобы не одно и то же\r\n      this.props.getPhotos(\r\n        Math.round(Math.random() * 4999 + 1),\r\n        this.per_page,\r\n        this.order_by\r\n      );\r\n    }\r\n  };\r\n\r\n  onClick = e => {\r\n    const img = e.target;\r\n    // Первым делом\r\n    img.classList.toggle(\"selected\");\r\n    /*\r\n    Для хранения избранных фотографий будем использовать localStorage\r\n    который мы инициализировали в app\r\n    */\r\n    const obj = localStorage.getObj(\"photos\");\r\n    if (img.classList.contains(\"selected\")) {\r\n      // Минимум параметров для react-photo-gallery и id для логики сравнения\r\n      obj.push({\r\n        id: img.id,\r\n        src: img.src,\r\n        width: img.width,\r\n        height: img.height\r\n      });\r\n      // Добавили\r\n      localStorage.setObj(\"photos\", obj);\r\n    } else {\r\n      // Или убрали\r\n      localStorage.setObj(\"photos\", obj.filter(el => el.id !== img.id));\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <PhotosMenu />\r\n        <div className=\"photos\">\r\n          <Gallery photos={this.props.photos} onClick={this.onClick} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getPhotos: (page, per_page, order_by) =>\r\n      getPhotosAction(page, per_page, order_by, dispatch)\r\n  };\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    photos: state.photos\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(Photos));\r\n","import PhotosService from \"../services/PhotosService\";\r\n\r\nexport const getPhotosAction = (page, per_page, order_by, dispatch) => {\r\n  PhotosService.getPhotos(page, per_page, order_by)\r\n    .then(photos => {\r\n      dispatch({ type: \"GET_PHOTOS\", photos });\r\n    })\r\n    .catch(error => {\r\n      alert(\"GET_PHOTOS error!\");\r\n    });\r\n};\r\n","import React, { Component } from \"react\";\r\nimport Gallery from \"react-photo-gallery\";\r\nimport PhotosMenu from \"./photos-menu\";\r\n\r\nexport default class Favorites extends Component {\r\n  // Без редакса.)\r\n  state = {\r\n    photos: localStorage.getObj(\"photos\")\r\n  };\r\n\r\n  onClick = e => {\r\n    const img = e.target;\r\n\r\n    // Самоликвидация\r\n    const photos = this.state.photos;\r\n    localStorage.setObj(\"photos\", photos.filter(el => el.id !== img.id));\r\n    this.setState({ photos: localStorage.getObj(\"photos\") });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <PhotosMenu />\r\n        <div className=\"photos\">\r\n          <Gallery photos={this.state.photos} onClick={this.onClick} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { Alert } from \"react-bootstrap\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { devToolsEnhancer } from \"redux-devtools-extension\";\nimport { rootReducer } from \"../../reducers\";\n\nimport Header from \"../header\";\nimport { Home, Test, Radio, Photos, Favorites } from \"../pages\";\n\nimport \"./app.scss\";\nimport \"../../bootstrap.min.css\";\n\nconst store = createStore(rootReducer, devToolsEnhancer());\n\n// Расширим методы localStorage для удобства работы с объектами\nStorage.prototype.setObj = function(key, obj) {\n  return this.setItem(key, JSON.stringify(obj));\n};\nStorage.prototype.getObj = function(key) {\n  return JSON.parse(this.getItem(key));\n};\n// Инициализируем localStorage\nif (!localStorage.getObj(\"photos\")) {\n  localStorage.setObj(\"photos\", []);\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <BrowserRouter>\n          <div className=\"app\">\n            <Header />\n            <Switch>\n              <Route path=\"/\" component={Home} exact />\n              <Route path=\"/test\" component={Test} />\n              <Route path=\"/radio\" component={Radio} />\n              <Route path=\"/photos\" component={Photos} />\n              <Route path=\"/favorites\" component={Favorites} />\n              <Route\n                render={() => <Alert variant=\"warning\">Page not found</Alert>}\n              />\n            </Switch>\n          </div>\n        </BrowserRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","import App from \"./app\";\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/app\";\n\nconst myContainer =\n  document.querySelector(\".container\") ||\n  document.querySelector(\".container-fluid\");\n\nReactDOM.render(<App />, myContainer);\n","module.exports = __webpack_public_path__ + \"static/media/logo.628caf08.png\";"],"sourceRoot":""}